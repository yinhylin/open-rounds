syntax = "proto3";

option go_package = "./pb";

message Vector {
  double x = 1;
  double y = 2;
}

message Action {
  enum Event {
    NONE = 0;
    MOVE_UP = 1;
    MOVE_DOWN = 2;
    MOVE_LEFT = 3;
    MOVE_RIGHT = 4;
  }
  Event action = 1;
}

message State {
  Vector velocity = 1;
  Vector position = 2;
}

message Actions {
  repeated Action actions = 1;
}

message SetPosition {
  Vector position = 1;
}

message Connect {}

message AddPlayer {}

message RemovePlayer {}

message ClientEvent {
  string id = 1;
  oneof event {
    Connect connect = 2;
    Actions actions = 3;
    SetPosition set_position = 4;
  }
}

message ServerEvent {
  string id = 1;
  oneof event {
    AddPlayer add_player = 3;
    RemovePlayer remove_player = 4;
    SetPosition set_position = 5;
    State entity_state = 6;
  }
}
