syntax = "proto3";

option go_package = "./pb";

message Vector {
  double x = 1;
  double y = 2;
}

message Entity {
  string id = 1;
  Vector velocity = 2;
  Vector position = 3;
  Actions actions = 4;
}

message States {
  repeated Entity states = 1;
}

message Actions {
  enum Event {
    NONE = 0;
    MOVE_UP = 1;
    MOVE_DOWN = 2;
    MOVE_LEFT = 3;
    MOVE_RIGHT = 4;
  }
  repeated Event actions = 1;
}

message EntityEvents {
  string id = 1;
  Actions actions = 2;
}

message Connect {}

message AddEntity {
  Entity entity = 1;
}

message RemoveEntity {
  string id = 1;
}

message ClientEvent {
  string id = 1;
  int64 tick = 2;
  oneof event {
    Connect connect = 3;
    Actions actions = 4;
  }
}

message ServerEvent {
  int64 tick = 1;
  oneof event {
    AddEntity add_entity = 2;
    RemoveEntity remove_entity = 3;
    EntityEvents entity_events = 4;
    States states = 5;
  }
}
